---
import "../../styles/global.css";
import Header from "../../components/Header.astro";
import SeasonBanner from "../../components/SeasonBanner.astro";
import StickyCta from "../../components/StickyCta.astro";
import Footer from "../../components/Footer.astro";

import { site, getSiteCopy } from "../../data/site";
import el from "../../i18n/el";

const t = el;

// EL page
const copy = getSiteCopy("el");

const title = `${site.name} – ${copy.tagline}`;
const desc = copy.description;
const year = new Date().getFullYear();
---

<html lang="el">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <link rel="preload" as="image" href="/hero/1-hero.jpg" />

    <title>{title}</title>
    <meta name="description" content={desc} />
    <link rel="canonical" href="https://sallysbar.gr/el" />

    <link
      rel="icon"
      type="image/png"
      href="/favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="/favicon/site.webmanifest" />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={desc} />
    <meta property="og:type" content="website" />

    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "BarOrPub",
        name: site.name,
        address: {
          "@type": "PostalAddress",
          streetAddress: site.addressShort,
          addressLocality: "Skala",
          addressRegion: "Kefalonia",
          postalCode: "28086",
          addressCountry: "GR",
        },
        telephone: site.phoneE164,
        url: "https://sallysbar.gr",
      })}
    />
  </head>

  <body class="min-h-screen bg-[#0b0b10] text-white font-body">
    <Header />

    <section class="relative overflow-hidden">
      <img
        id="hero-image"
        src="/hero/1-hero.jpg"
        alt={t.home.heroAlt}
        class="absolute inset-0 h-full w-full object-cover transition-opacity duration-700 opacity-100"
        loading="eager"
      />

      <div class="absolute inset-0 bg-black/50"></div>

      <div class="relative mx-auto max-w-6xl px-6 py-32 md:py-40">
        <div class="text-xs uppercase tracking-[0.25em] text-white/60">
          {t.home.locationLine}
        </div>

        <div class="mt-4 flex items-center gap-4">
          <img
            src="/logo/1-logo.png"
            alt="Sally's Bar logo"
            class="h-12 w-12 md:h-16 md:w-16"
            loading="eager"
          />
          <h1 class="text-5xl font-semibold leading-tight md:text-7xl">
            {site.name}
          </h1>
        </div>

        <p class="mt-6 max-w-2xl text-xl text-white/70">
          <span class="text-white font-semibold">{copy.tagline}</span><br />
          {t.home.heroSubline}
        </p>

        <div class="mt-6">
          <SeasonBanner
            isOpenNow={site.season.isOpenNow}
            opensFromText={copy.opensFromText}
          />
        </div>

        <div class="mt-8 flex flex-wrap gap-3 items-center">
          <a
            href={site.mapsShareUrl}
            target="_blank"
            class="rounded-2xl bg-white px-6 py-3 font-semibold text-black hover:bg-white/90"
          >
            {t.home.ctaDirections}
          </a>

          <a
            href={`tel:${site.phoneE164}`}
            class="rounded-2xl border border-white/20 px-6 py-3 font-semibold hover:bg-white/10"
          >
            {t.home.ctaCall}
          </a>
        </div>

        <div class="mt-4 flex flex-wrap gap-2 text-sm">
          <a
            href={site.socials.instagram}
            target="_blank"
            class="rounded-full border border-white/15 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition"
          >
            {t.home.linkInstagram}
          </a>

          <a
            href={site.socials.facebook}
            target="_blank"
            class="rounded-full border border-white/15 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition"
          >
            {t.home.linkFacebook}
          </a>

          <a
            href={site.socials.tripadvisor}
            target="_blank"
            class="rounded-full border border-white/15 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition"
          >
            {t.home.linkTripadvisor}
          </a>

          <a
            href={site.reviews.googleUrl}
            target="_blank"
            class="rounded-full border border-white/15 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition"
          >
            {t.home.linkGoogleReviews}
          </a>
        </div>

        <div class="mt-8 flex flex-wrap gap-3 text-sm text-white/70">
          <div class="rounded-full border border-white/10 px-3 py-1">
            ⭐ {site.ratings.google.rating}
            {t.home.googleRatingLabel}
          </div>

          <div class="rounded-full border border-white/10 px-3 py-1">
            {copy.hoursText}
          </div>

          <div class="rounded-full border border-white/10 px-3 py-1">
            {site.addressFull}
          </div>
        </div>

        <div class="mt-8 grid gap-3 md:max-w-2xl md:grid-cols-2">
          <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
            <div class="text-sm font-semibold">{t.home.earlyTitle}</div>
            <div class="mt-1 text-sm text-white/70">{t.home.earlyText}</div>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
            <div class="text-sm font-semibold">{t.home.lateTitle}</div>
            <div class="mt-1 text-sm text-white/70">{t.home.lateText}</div>
          </div>
        </div>

        <div class="mt-6">
          <div
            class="inline-block rounded-full border border-white/20 px-5 py-2 text-sm"
          >
            {t.home.pricePill}
          </div>
        </div>

        <p class="mt-4 text-sm text-white/70">{t.home.ukLine}</p>
      </div>
    </section>

    <section id="visit" class="mx-auto max-w-6xl px-6 py-12">
      <section class="mx-auto max-w-6xl px-6 py-12">
        <h2 class="text-3xl font-semibold">{t.home.visitTitle}</h2>

        <div class="mt-6 overflow-hidden rounded-2xl border border-white/10">
          <iframe
            class="w-full h-[420px] border-0"
            src="https://www.google.com/maps?q=Sally%27s%20Bar%20Skala%20Kefalonia&output=embed"
            loading="lazy"
            title="Google Maps"></iframe>
        </div>
      </section>

      <section class="mx-auto max-w-6xl px-6 py-14">
        <h2 class="text-3xl font-semibold">{t.home.photoStripTitle}</h2>

        <div class="mt-10 grid gap-4 md:grid-cols-4 md:grid-rows-2">
          <img
            src="/photos/5.premium-drinks.jpg"
            alt={t.home.photoAltPremium}
            class="col-span-2 row-span-2 h-full w-full object-cover rounded-3xl"
            loading="eager"
          />

          <div class="gallery-img cursor-zoom-in">
            <img
              src="/photos/1.sallys-bar-cocktails-skala.jpg"
              alt={t.home.photoAltSignature}
              class="h-full w-full object-cover rounded-3xl"
              loading="eager"
            />
          </div>

          <div class="gallery-img cursor-zoom-in">
            <img
              src="/photos/3.sallys-bar-lounge.jpg"
              alt={t.home.photoAltLounge}
              class="h-full w-full object-cover rounded-3xl"
              loading="eager"
            />
          </div>

          <div class="gallery-img cursor-zoom-in">
            <img
              src="/photos/5.signature-cocktails.jpg"
              alt={t.home.photoAltSignature2}
              class="h-full w-full object-cover rounded-3xl"
              loading="eager"
            />
          </div>

          <div class="gallery-img cursor-zoom-in">
            <img
              src="/photos/5.bar-lighting.jpg"
              alt={t.home.photoAltLighting}
              class="h-full w-full object-cover rounded-3xl"
              loading="eager"
            />
          </div>
        </div>
      </section>

      <section class="mx-auto max-w-6xl px-6 py-10 grid gap-6 md:grid-cols-3">
        <div class="rounded-2xl border border-white/10 p-6 bg-white/5">
          <h2 class="text-xl font-semibold">{t.home.why1Title}</h2>
          <p class="mt-3 text-white/70">{t.home.why1Text}</p>
        </div>

        <div class="rounded-2xl border border-white/10 p-6 bg-white/5">
          <h2 class="text-xl font-semibold">{t.home.why2Title}</h2>
          <p class="mt-3 text-white/70">{t.home.why2Text}</p>
        </div>

        <div class="rounded-2xl border border-white/10 p-6 bg-white/5">
          <h2 class="text-xl font-semibold">{t.home.why3Title}</h2>
          <p class="mt-3 text-white/70">{t.home.why3Text}</p>
        </div>
      </section>

      <Footer />

      <StickyCta
        mapsUrl={site.mapsShareUrl}
        phoneE164={site.phoneE164}
        instagramUrl={site.socials.instagram}
        facebookUrl={site.socials.facebook}
        tripadvisorUrl={site.socials.tripadvisor}
        googleUrl={site.socials.google}
        isOpenNow={site.season.isOpenNow}
      />

      <div
        id="lightbox"
        class="fixed inset-0 bg-black/90 hidden items-center justify-center z-50"
      >
        <img
          id="lightbox-img"
          class="max-h-[90vh] max-w-[90vw] rounded-2xl shadow-2xl"
        />
      </div>

      <script is:inline>
        const lightbox = document.getElementById("lightbox");
        const lightboxImg = document.getElementById("lightbox-img");

        document.querySelectorAll(".gallery-img img").forEach((img) => {
          img.addEventListener("click", () => {
            lightbox.classList.remove("hidden");
            lightbox.classList.add("flex");
            lightboxImg.src = img.src;
            lightboxImg.alt = img.alt;
          });
        });

        lightbox.addEventListener("click", () => {
          lightbox.classList.add("hidden");
          lightbox.classList.remove("flex");
        });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            lightbox.classList.add("hidden");
            lightbox.classList.remove("flex");
          }
        });

        (() => {
          const hero = document.getElementById("hero-image");
          if (!hero) return;

          const HERO_COUNT = 10;
          const INTERVAL = 5000;

          let current = Math.floor(Math.random() * HERO_COUNT) + 1;

          setInterval(() => {
            let next;
            do {
              next = Math.floor(Math.random() * HERO_COUNT) + 1;
            } while (next === current);

            hero.classList.remove("opacity-100");
            hero.classList.add("opacity-0");

            setTimeout(() => {
              hero.src = `/hero/${next}-hero.jpg`;
              hero.classList.remove("opacity-0");
              hero.classList.add("opacity-100");
              current = next;
            }, 700);
          }, INTERVAL);
        })();
      </script>
    </section>
  </body>
</html>
